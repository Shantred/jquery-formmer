(function(b,g,f,h){function e(a,c){this.ele=a;this.settings=b.extend({},d,c);this._defaults=d;this._name="formmer";if("string"===typeof c){if("function"===typeof this[c])this[c]()}else return this.init(),this}var d={enableOnError:!0,enableOnSucces:!1,watchURL:null,disableFormInputs:!1,disableAjax:!1,enabledCallback:null,disabledCallback:null,ajaxOnSuccess:null,ajaxOnError:null,loadingHTML:"Please Wait"};b.extend(e.prototype,{init:function(){this.bindFormSubmission(this.ele);this.getDataSettings(this.ele)},
bindFormSubmission:function(){this.ele.addClass("formmer").attr("data-formmerid",b("[data-formmerid]").length+1);null!=this.ele.attr("action")&&formmerUrls.push(b(form).attr("action"));this.ele.on("submit",null,{formmer:this},function(a){if(b(this.ele).hasClass("formmer-processing"))return a.stopImmediatePropagation(),!1;a.data.formmer.disableSubmission();return!1})},getDataSettings:function(){null!=this.ele.attr("data-enableonsuccess")&&"true"===this.ele.attr("data-enableonsuccess").toLowerCase()&&
(this.settings.enableOnSuccess=!0);null!=this.ele.attr("data-enableonerror")&&"false"===this.ele.attr("data-enableonerror").toLowerCase()&&(this.settings.enableOnError=!1);null!=this.ele.attr("data-watchurl")?this.settings.watchURL=this.ele.attr("data-watchurl"):this.settings.watchURL&&this.ele.attr("data-watchurl",this.settings.watchURL);null!=this.ele.attr("data-disableajax")&&"true"===this.ele.attr("data-disableajax").toLowerCase()&&(this.settings.disableAjax=!0);null!=this.ele.attr("data-disableforminputs")&&
"true"===this.ele.attr("data-disableforminputs").toLowerCase()&&(this.settings.disableFormInputs=!0)},enableSubmission:function(a){a?(this.settings.disableFormInputs&&this.ele.children("input, textarea, select").prop("disabled",!1),this.ele.removeClass("formmer-processing"),this.enableFormButton(),this.settings.ajaxOnError&&this.settings.ajaxOnError.call(this)):(this.settings.enableOnSuccess&&(this.settings.disableFormInputs&&this.ele.children("input, textarea, select").prop("disabled",!1),this.ele.removeClass("formmer-processing"),
this.enableFormButton()),this.settings.ajaxOnSuccess&&this.settings.ajaxOnError.call(this))},disableSubmission:function(){this.ele.addClass("formmer-processing");!0===this.settings.disableFormInputs&&this.ele.children("input, textarea, select").prop("disabled",!0);this.disableFormButton()},enableFormButton:function(){var a=this.ele.find("button[type=submit]");a&&a.html(a.attr("data-originalhtml")).prop("disabled",!1).removeAttr("data-originalhtml");this.settings.enabledCallback&&this.settings.enabledCallback.call(this,
this.ele,a)},disableFormButton:function(){var a=this.ele.find("button[type=submit]");a&&(a.attr("data-loadinghtml")?a.attr("data-originalhtml",a.html()).html(a.attr("data-loadinghtml")).prop("disabled",!0):a.attr("data-originalhtml",a.html()).html(this.settings.loadingHTML).prop("disabled",!0));this.settings.disabledCallback&&this.settings.disabledCallback.call(this,this.ele,a)}});b.fn.formmer=function(a){if("string"===typeof a)return new e(this,a);b.data(f,"formmer-"+(b("[data-formmerid]").length+
1),new e(this,a));return b.data(f,"formmer-"+ +(b("[data-formmerid]").length+1))};b.each(b("form.formmer:not([data-formmerid])"),function(a,c){b(c).formmer()});b.ajaxPrefilter(function(a,c,e){c=b("form.formmer[data-watchurl='"+a.url+"']:not([data-disableajax=true])");0===c.length&&(c=b("form.formmer[action='"+a.url+"']:not([data-disableajax=true])"));if(c.length){var d=b.data(f,"formmer-"+c.attr("data-formmerid"));a.success=[function(){d.enableSubmission(!1)},a.success];a.error=[function(){d.enableSubmission(!0)},
a.error]}})})(jQuery,window,document);
